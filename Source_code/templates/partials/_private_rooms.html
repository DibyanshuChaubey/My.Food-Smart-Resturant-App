<section id="private-rooms" class="section bg-charcoal-2 text-ivory">
  <div class="container max-w-6xl mx-auto px-4">

    <!-- üèõÔ∏è Section Header -->
    <div class="section-head text-center mb-12">
      <h2 class="section-title text-gold">Private Dining & Rooms</h2>
      <p class="section-sub text-ivory/70 max-w-2xl mx-auto">
        Experience the perfect setting for birthdays, anniversaries, or business dinners in our elegant private spaces.
      </p>
    </div>

    <!-- üñºÔ∏è Showcase + Form Layout -->
    <div class="grid md:grid-cols-2 gap-10 items-center">

      <!-- üì∏ Private Room Image -->
      <div class="rounded-2xl overflow-hidden shadow-gold/20 border border-gold/10">
        <img 
          src="https://images.unsplash.com/photo-1552566626-52f8b828add9?q=80&w=1920&auto=format&fit=crop" 
          alt="Private Dining Room" 
          class="w-full h-[400px] object-cover hover:scale-105 transition-transform duration-700 ease-in-out">
      </div>

      <!-- üìù Booking Form -->
      <div id="privateRoomFormWrapper" class="panel bg-charcoal p-6 rounded-2xl border border-gold/10 shadow-gold/10">
        <h3 class="panel-title text-gold mb-4 flex items-center gap-2">
          <i class="fa-solid fa-door-open text-gold"></i> Book a Private Room
        </h3>

        <p class="text-ivory/70 mb-5 text-sm">
          Fill in your details and our staff will contact you to confirm your booking.
        </p>

        <!-- ‚úÖ Private Room Booking Form -->
        <form id="privateRoomForm" class="space-y-4">
          <div>
            <label class="label">Your Name</label>
            <input type="text" name="name" class="input" placeholder="John Doe" required>
          </div>
          <div>
            <label class="label">Email</label>
            <input type="email" name="email" class="input" placeholder="john@example.com" required>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="label">Date</label>
              <input type="date" name="date" class="input" required>
            </div>
            <div>
              <label class="label">Time</label>
              <input type="time" name="time" class="input" required>
            </div>
          </div>
          <div>
            <label class="label">Message or Special Requests</label>
            <textarea name="specialRequests" class="input" placeholder="Any specific arrangements or preferences?"></textarea>
          </div>

          <button type="submit" class="btn btn-gold w-full font-semibold mt-2 text-charcoal">
            <i class="fa-solid fa-calendar-check mr-2"></i> Submit Request
          </button>
        </form>

        <!-- üí¨ Message Display -->
        <div id="privateRoomMessage" class="mt-4 text-center text-sm"></div>
      </div>
    </div>

    <!-- ‚ú® CTA Button -->
    <div class="text-center mt-12">
      <button id="showPrivateRoomForm" class="btn btn-accent px-6 py-3">
        <i class="fa-solid fa-door-open mr-2"></i> Reserve Your Private Space
      </button>
    </div>
  </div>

  <!-- üß† JS Script -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const roomForm = document.getElementById("privateRoomForm");
    const msgBox = document.getElementById("privateRoomMessage");

    roomForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      msgBox.textContent = "Submitting your booking...";
      msgBox.className = "text-ivory/70 text-sm mt-3";

      const formData = new FormData(roomForm);
      const data = Object.fromEntries(formData.entries());

      try {
        const res = await fetch("/customer/api/private-room", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const result = await res.json();

        if (res.status === 401 && result.login_required) {
          msgBox.innerHTML = "‚ö†Ô∏è Please <a href='/otp_login' class='text-gold underline'>login</a> to book a private room.";
          msgBox.className = "text-red-400 mt-3 text-sm";
        } 
        else if (result.success) {
          msgBox.textContent = "‚úÖ Your private room has been booked successfully!";
          msgBox.className = "text-green-400 mt-3 text-sm";
          roomForm.reset();
        } 
        else {
          msgBox.textContent = "‚ùå " + (result.error || "Something went wrong. Try again.");
          msgBox.className = "text-red-400 mt-3 text-sm";
        }
      } catch (error) {
        console.error("Error:", error);
        msgBox.textContent = "‚ùå Network error. Please try again later.";
        msgBox.className = "text-red-400 mt-3 text-sm";
      }
    });
  });
  </script>
</section>
